<!DOCTYPE html>
<html lang="fr" class="h-full bg-gray-50">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}eSchool - Système de gestion scolaire{% endblock %}</title>
    
    <!-- Tailwind CSS - Compiled version -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
    
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    <!-- Alpine.js pour l'interactivité -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    
    {% block extra_css %}{% endblock %}
    {% block extra_head %}{% endblock %}
</head>
<body class="h-full">
    <div class="min-h-full">
        <!-- Navigation -->
        <nav class="{% if user.role == 'STUDENT' %}bg-blue-600{% elif user.role == 'PARENT' %}bg-green-600{% elif user.role == 'TEACHER' %}bg-purple-600{% elif user.role == 'FINANCE' %}bg-teal-600{% else %}bg-indigo-600{% endif %}" x-data="{ mobileMenuOpen: false }">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div class="flex h-16 items-center justify-between">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <a href="{% url 'home' %}" class="text-white text-xl font-bold hover:text-gray-200 transition-colors duration-200 flex items-center">
                                {% if user.role == 'STUDENT' %}
                                    <span class="material-icons mr-2">school</span> eSchool
                                {% elif user.role == 'PARENT' %}
                                    <span class="material-icons mr-2">family_restroom</span> eSchool
                                {% elif user.role == 'TEACHER' %}
                                    <span class="material-icons mr-2">business</span> eSchool
                                {% elif user.role == 'FINANCE' %}
                                    <span class="material-icons mr-2">account_balance</span> eSchool
                                {% else %}
                                    <span class="material-icons mr-2">admin_panel_settings</span> eSchool
                                {% endif %}
                            </a>
                        </div>
                        <div class="hidden md:block">
                            <div class="ml-10 flex items-baseline space-x-4">
                                {% if user.is_authenticated %}
                                    <a href="{% url 'accounts:dashboard' %}" class="text-gray-300 hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center">
                                        {% if user.role == 'STUDENT' %}<span class="material-icons mr-1 text-sm">dashboard</span> Mon tableau de bord
                                        {% elif user.role == 'PARENT' %}<span class="material-icons mr-1 text-sm">child_care</span> Mes enfants
                                        {% elif user.role == 'TEACHER' %}<span class="material-icons mr-1 text-sm">menu_book</span> Accueil
                                        {% elif user.role == 'FINANCE' %}<span class="material-icons mr-1 text-sm">dashboard</span> Tableau de bord
                                        {% else %}<span class="material-icons mr-1 text-sm">settings</span> Administration{% endif %}
                                    </a>
                                    
                                    {% if user.role == 'STUDENT' %}
                                        <a href="{% url 'accounts:student_grades_detail' %}" class="text-gray-300 hover:bg-blue-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">grade</span> Mes notes</a>
                                        <a href="{% url 'accounts:student_attendance_detail' %}" class="text-gray-300 hover:bg-blue-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">event_available</span> Mes présences</a>
                                        <a href="{% url 'accounts:student_finance_detail' %}" class="text-gray-300 hover:bg-blue-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">account_balance_wallet</span> Mes finances</a>
                                        <a href="{% url 'accounts:student_academic_calendar' %}" class="text-gray-300 hover:bg-blue-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">calendar_month</span> Calendrier</a>
                                    {% elif user.role == 'PARENT' %}
                                        <a href="{% url 'accounts:parent_children_overview' %}" class="text-gray-300 hover:bg-green-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">groups</span> Vue d'ensemble</a>
                                        <a href="{% url 'accounts:parent_communication_center' %}" class="text-gray-300 hover:bg-green-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">chat</span> Communication</a>
                                        <a href="{% url 'finance:invoice_list' %}" class="text-gray-300 hover:bg-green-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">credit_card</span> Paiements</a>
                                    {% elif user.role == 'TEACHER' %}
                                        <a href="{% url 'academic:attendance_list' %}" class="text-gray-300 hover:bg-purple-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">check_circle</span> Présences</a>
                                        <a href="{% url 'academic:grade_list' %}" class="text-gray-300 hover:bg-purple-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">assessment</span> Notes</a>
                                        <a href="{% url 'academic:classroom_list' %}" class="text-gray-300 hover:bg-purple-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">meeting_room</span> Classes</a>
                                    {% elif user.role == 'FINANCE' %}
                                        <a href="{% url 'finance:invoice_list' %}" class="text-gray-300 hover:bg-teal-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">receipt_long</span> Factures</a>
                                        <a href="{% url 'finance:payment_list' %}" class="text-gray-300 hover:bg-teal-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">payments</span> Paiements</a>
                                        <a href="{% url 'finance:pending_payments' %}" class="text-gray-300 hover:bg-teal-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">pending</span> En attente</a>
                                        <a href="{% url 'finance:daily_financial_report' %}" class="text-gray-300 hover:bg-teal-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">analytics</span> Rapports</a>
                                    {% elif user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' %}
                                        <a href="{% url 'academic:classroom_list' %}" class="text-gray-300 hover:bg-indigo-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">meeting_room</span> Classes</a>
                                        
                                        <!-- Dropdown Utilisateurs -->
                                        <div class="relative" x-data="{ open: false }" @click.outside="open = false">
                                            <button @click="open = !open" class="text-gray-300 hover:bg-indigo-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center">
                                                <span class="material-icons mr-1 text-sm">groups</span> Utilisateurs
                                                <svg class="ml-1 h-4 w-4" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                                </svg>
                                            </button>
                                            
                                            <div x-show="open" 
                                                 x-transition:enter="transition ease-out duration-200" 
                                                 x-transition:enter-start="opacity-0 scale-95" 
                                                 x-transition:enter-end="opacity-100 scale-100" 
                                                 x-transition:leave="transition ease-in duration-75" 
                                                 x-transition:leave-start="opacity-100 scale-100" 
                                                 x-transition:leave-end="opacity-0 scale-95"
                                                 class="absolute left-0 z-50 mt-2 w-48 origin-top-left rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" style="display: none;">
                                                <a href="{% url 'accounts:student_list' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 flex items-center">
                                                    <span class="material-icons mr-2 text-sm">school</span> Élèves
                                                </a>
                                                <a href="{% url 'accounts:teacher_list' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 flex items-center">
                                                    <span class="material-icons mr-2 text-sm">person</span> Enseignants
                                                </a>
                                                <a href="{% url 'accounts:parent_list' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 flex items-center">
                                                    <span class="material-icons mr-2 text-sm">family_restroom</span> Parents
                                                </a>
                                            </div>
                                        </div>
                                        
                                        <a href="{% url 'finance:invoice_list' %}" class="text-gray-300 hover:bg-indigo-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">account_balance</span> Finances</a>
                                    {% endif %}
                                    
                                    <!-- Liens communs -->
                                    {% if user.role != 'STUDENT' %}
                                        <a href="{% url 'communication:announcement_list' %}" class="text-gray-300 hover:{% if user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">campaign</span> Annonces</a>
                                    {% endif %}
                                    <a href="{% url 'communication:message_list' %}" class="text-gray-300 hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center"><span class="material-icons mr-1 text-sm">mail</span> Messages</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="hidden md:block">
                        <div class="ml-4 flex items-center md:ml-6">
                            {% if user.is_authenticated %}
                                <!-- Badge de rôle -->
                                <div class="mr-3">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {% if user.role == 'STUDENT' %}bg-blue-100 text-blue-800{% elif user.role == 'PARENT' %}bg-green-100 text-green-800{% elif user.role == 'TEACHER' %}bg-purple-100 text-purple-800{% elif user.role == 'FINANCE' %}bg-teal-100 text-teal-800{% else %}bg-indigo-100 text-indigo-800{% endif %}">
                                        {% if user.role == 'STUDENT' %}<span class="material-icons mr-1" style="font-size: 12px;">school</span> Élève
                                        {% elif user.role == 'PARENT' %}<span class="material-icons mr-1" style="font-size: 12px;">family_restroom</span> Parent
                                        {% elif user.role == 'TEACHER' %}<span class="material-icons mr-1" style="font-size: 12px;">person</span> Enseignant
                                        {% elif user.role == 'FINANCE' %}<span class="material-icons mr-1" style="font-size: 12px;">account_balance</span> Finance
                                        {% else %}<span class="material-icons mr-1" style="font-size: 12px;">admin_panel_settings</span> {{ user.get_role_display }}{% endif %}
                                    </span>
                                </div>

                                <!-- Notifications -->
                                <button type="button" class="relative rounded-full {% if user.role == 'STUDENT' %}bg-blue-600{% elif user.role == 'PARENT' %}bg-green-600{% elif user.role == 'TEACHER' %}bg-purple-600{% elif user.role == 'FINANCE' %}bg-teal-600{% else %}bg-indigo-600{% endif %} p-1 text-white hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-{% if user.role == 'STUDENT' %}blue{% elif user.role == 'PARENT' %}green{% elif user.role == 'TEACHER' %}purple{% elif user.role == 'FINANCE' %}teal{% else %}indigo{% endif %}-600">
                                    <span class="sr-only">Voir les notifications</span>
                                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                                    </svg>
                                    <!-- Badge de notification -->
                                    <span class="absolute -top-0.5 -right-0.5 h-4 w-4 bg-red-500 border-2 border-white rounded-full text-xs text-white flex items-center justify-center">3</span>
                                </button>

                                <!-- Profile dropdown -->
                                <div class="relative ml-3" x-data="{ open: false }" @click.outside="open = false">
                                    <button @click="open = !open" type="button" class="relative flex max-w-xs items-center rounded-full {% if user.role == 'STUDENT' %}bg-blue-600{% elif user.role == 'PARENT' %}bg-green-600{% elif user.role == 'TEACHER' %}bg-purple-600{% elif user.role == 'FINANCE' %}bg-teal-600{% else %}bg-indigo-600{% endif %} text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-{% if user.role == 'STUDENT' %}blue{% elif user.role == 'PARENT' %}green{% elif user.role == 'TEACHER' %}purple{% elif user.role == 'FINANCE' %}teal{% else %}indigo{% endif %}-600">
                                        <span class="sr-only">Ouvrir le menu utilisateur</span>
                                        {% if user.avatar %}
                                            <img class="h-8 w-8 rounded-full object-cover" src="{{ user.avatar.url }}" alt="">
                                        {% else %}
                                            <div class="h-8 w-8 rounded-full {% if user.role == 'STUDENT' %}bg-blue-500{% elif user.role == 'PARENT' %}bg-green-500{% elif user.role == 'TEACHER' %}bg-purple-500{% else %}bg-indigo-500{% endif %} flex items-center justify-center">
                                                <span class="text-sm font-medium text-white">{{ user.first_name.0 }}{{ user.last_name.0 }}</span>
                                            </div>
                                        {% endif %}
                                    </button>
                                    
                                    <div x-show="open" 
                                         x-transition:enter="transition ease-out duration-200" 
                                         x-transition:enter-start="opacity-0 scale-95" 
                                         x-transition:enter-end="opacity-100 scale-100" 
                                         x-transition:leave="transition ease-in duration-75" 
                                         x-transition:leave-start="opacity-100 scale-100" 
                                         x-transition:leave-end="opacity-0 scale-95"
                                         class="absolute right-0 z-50 mt-2 w-56 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" style="display: none;">
                                        <div class="px-4 py-3 text-sm text-gray-700 border-b border-gray-200">
                                            <div class="font-medium">{{ user.first_name }} {{ user.last_name }}</div>
                                            <div class="text-xs text-gray-500">{{ user.email }}</div>
                                            <div class="text-xs text-gray-400 mt-1">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium {% if user.role == 'STUDENT' %}bg-blue-100 text-blue-800{% elif user.role == 'PARENT' %}bg-green-100 text-green-800{% elif user.role == 'TEACHER' %}bg-purple-100 text-purple-800{% else %}bg-indigo-100 text-indigo-800{% endif %}">
                                                    {% if user.role == 'STUDENT' %}Élève
                                                    {% elif user.role == 'PARENT' %}Parent
                                                    {% elif user.role == 'TEACHER' %}Enseignant
                                                    {% else %}{{ user.get_role_display }}{% endif %}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <a href="{% url 'accounts:profile' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                            <span class="material-icons mr-2 text-sm">person</span> Mon profil
                                        </a>
                                        
                                        {% if user.role == 'STUDENT' %}
                                            <a href="{% url 'accounts:student_grades_detail' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                                <span class="material-icons mr-2 text-sm">assessment</span> Mes notes
                                            </a>
                                            <a href="{% url 'accounts:student_finance_detail' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                                <span class="material-icons mr-2 text-sm">account_balance_wallet</span> Mes finances
                                            </a>
                                        {% elif user.role == 'PARENT' %}
                                            <a href="{% url 'accounts:parent_children_overview' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                                <span class="material-icons mr-2 text-sm">child_care</span> Mes enfants
                                            </a>
                                            <a href="{% url 'accounts:parent_communication_center' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                                <span class="material-icons mr-2 text-sm">chat</span> Communication
                                            </a>
                                        {% elif user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' %}
                                            <a href="/admin/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                                <span class="material-icons mr-2 text-sm">settings</span> Administration Django
                                            </a>
                                        {% endif %}
                                        
                                        <div class="border-t border-gray-200 my-1"></div>
                                        
                                        <a href="{% url 'accounts:logout' %}" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center font-medium">
                                            <span class="material-icons mr-2 text-sm">logout</span> Se déconnecter
                                        </a>
                                    </div>
                                </div>
                            {% else %}
                                <a href="{% url 'accounts:login' %}" class="text-gray-300 hover:bg-indigo-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Se connecter</a>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Mobile menu button -->
                    <div class="md:hidden">
                        <button type="button" @click="mobileMenuOpen = !mobileMenuOpen" class="relative inline-flex items-center justify-center rounded-md {% if user.role == 'STUDENT' %}bg-blue-600{% elif user.role == 'PARENT' %}bg-green-600{% elif user.role == 'TEACHER' %}bg-purple-600{% elif user.role == 'FINANCE' %}bg-teal-600{% else %}bg-indigo-600{% endif %} p-2 text-white hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-{% if user.role == 'STUDENT' %}blue{% elif user.role == 'PARENT' %}green{% elif user.role == 'TEACHER' %}purple{% elif user.role == 'FINANCE' %}teal{% else %}indigo{% endif %}-600">
                            <span class="sr-only">Ouvrir le menu principal</span>
                            <svg x-show="!mobileMenuOpen" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="display: block;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                            </svg>
                            <svg x-show="mobileMenuOpen" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="display: none;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Menu mobile adaptatif -->
            <div x-show="mobileMenuOpen" x-transition class="md:hidden {% if user.role == 'STUDENT' %}bg-blue-600{% elif user.role == 'PARENT' %}bg-green-600{% elif user.role == 'TEACHER' %}bg-purple-600{% elif user.role == 'FINANCE' %}bg-teal-600{% else %}bg-indigo-600{% endif %} px-2 pt-2 pb-3 space-y-1 sm:px-3" style="display: none;">
                {% if user.is_authenticated %}
                <a href="{% url 'accounts:dashboard' %}" class="text-white hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} block px-3 py-2 rounded-md text-base font-medium flex items-center">
                    {% if user.role == 'STUDENT' %}<span class="material-icons mr-2">dashboard</span> Mon tableau de bord
                    {% elif user.role == 'PARENT' %}<span class="material-icons mr-2">child_care</span> Mes enfants
                    {% elif user.role == 'TEACHER' %}<span class="material-icons mr-2">menu_book</span> Mes classes
                    {% elif user.role == 'FINANCE' %}<span class="material-icons mr-2">dashboard</span> Tableau de bord
                    {% else %}<span class="material-icons mr-2">settings</span> Administration{% endif %}
                </a>                    {% if user.role == 'STUDENT' %}
                        <a href="{% url 'accounts:student_grades_detail' %}" class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">grade</span> Mes notes</a>
                        <a href="{% url 'accounts:student_attendance_detail' %}" class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">event_available</span> Mes présences</a>
                        <a href="{% url 'accounts:student_finance_detail' %}" class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">account_balance_wallet</span> Mes finances</a>
                        <a href="{% url 'accounts:student_academic_calendar' %}" class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">calendar_month</span> Calendrier</a>
                    {% elif user.role == 'PARENT' %}
                        <a href="{% url 'accounts:parent_children_overview' %}" class="text-white hover:bg-green-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">groups</span> Vue d'ensemble</a>
                        <a href="{% url 'accounts:parent_communication_center' %}" class="text-white hover:bg-green-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">chat</span> Communication</a>
                        <a href="{% url 'finance:invoice_list' %}" class="text-white hover:bg-green-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">credit_card</span> Paiements</a>
                    {% elif user.role == 'TEACHER' %}
                        <a href="{% url 'academic:attendance_list' %}" class="text-white hover:bg-purple-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">check_circle</span> Présences</a>
                        <a href="{% url 'academic:grade_list' %}" class="text-white hover:bg-purple-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">assessment</span> Notes</a>
                        <a href="{% url 'academic:classroom_list' %}" class="text-white hover:bg-purple-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">meeting_room</span> Classes</a>
                    {% elif user.role == 'FINANCE' %}
                        <a href="{% url 'finance:invoice_list' %}" class="text-white hover:bg-teal-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">receipt_long</span> Factures</a>
                        <a href="{% url 'finance:payment_list' %}" class="text-white hover:bg-teal-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">payments</span> Paiements</a>
                        <a href="{% url 'finance:pending_payments' %}" class="text-white hover:bg-teal-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">pending</span> En attente</a>
                        <a href="{% url 'finance:daily_financial_report' %}" class="text-white hover:bg-teal-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">analytics</span> Rapports</a>
                    {% elif user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' %}
                        <a href="{% url 'academic:classroom_list' %}" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">meeting_room</span> Classes</a>
                        
                        <!-- Dropdown Utilisateurs Mobile -->
                        <div x-data="{ open: false }">
                            <button @click="open = !open" class="text-white hover:bg-indigo-700 w-full text-left px-3 py-2 rounded-md text-base font-medium flex items-center justify-between">
                                <span class="flex items-center">
                                    <span class="material-icons mr-2 text-sm">groups</span> Utilisateurs
                                </span>
                                <svg class="h-5 w-5" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                            </button>
                            
                            <div x-show="open" x-transition class="pl-6 space-y-1">
                                <a href="{% url 'accounts:student_list' %}" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-sm font-medium flex items-center">
                                    <span class="material-icons mr-2 text-sm">school</span> Élèves
                                </a>
                                <a href="{% url 'accounts:teacher_list' %}" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-sm font-medium flex items-center">
                                    <span class="material-icons mr-2 text-sm">person</span> Enseignants
                                </a>
                                <a href="{% url 'accounts:parent_list' %}" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-sm font-medium flex items-center">
                                    <span class="material-icons mr-2 text-sm">family_restroom</span> Parents
                                </a>
                            </div>
                        </div>
                        
                        <a href="{% url 'finance:invoice_list' %}" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">account_balance</span> Finances</a>
                    {% endif %}
                    
                    <!-- Liens communs -->
                    {% if user.role != 'STUDENT' %}
                        <a href="{% url 'communication:announcement_list' %}" class="text-white hover:{% if user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">campaign</span> Annonces</a>
                    {% endif %}
                    <a href="{% url 'communication:message_list' %}" class="text-white hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% elif user.role == 'FINANCE' %}bg-teal-700{% else %}bg-indigo-700{% endif %} block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">mail</span> Messages</a>
                    
                    <!-- Séparateur -->
                    <div class="border-t {% if user.role == 'STUDENT' %}border-blue-500{% elif user.role == 'PARENT' %}border-green-500{% elif user.role == 'TEACHER' %}border-purple-500{% elif user.role == 'FINANCE' %}border-teal-500{% else %}border-indigo-500{% endif %} my-2"></div>
                    
                    <!-- Profil mobile -->
                    <div class="px-3 py-2">
                        <div class="flex items-center">
                            {% if user.avatar %}
                                <img class="h-10 w-10 rounded-full" src="{{ user.avatar.url }}" alt="">
                            {% else %}
                                <div class="h-10 w-10 rounded-full {% if user.role == 'STUDENT' %}bg-blue-500{% elif user.role == 'PARENT' %}bg-green-500{% elif user.role == 'TEACHER' %}bg-purple-500{% else %}bg-indigo-500{% endif %} flex items-center justify-center">
                                    <span class="text-sm font-medium text-white">{{ user.first_name.0 }}{{ user.last_name.0 }}</span>
                                </div>
                            {% endif %}
                            <div class="ml-3">
                                <div class="text-base font-medium text-white">{{ user.first_name }} {{ user.last_name }}</div>
                                <div class="text-sm font-medium {% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %}">{{ user.email }}</div>
                            </div>
                        </div>
                        <div class="mt-3 space-y-1">
                            <a href="{% url 'accounts:profile' %}" class="text-white hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% else %}bg-indigo-700{% endif %} block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">person</span> Mon profil</a>
                            {% if user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' %}
                                <a href="/admin/" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">settings</span> Administration Django</a>
                            {% endif %}
                            <a href="{% url 'accounts:logout' %}" class="text-white hover:{% if user.role == 'STUDENT' %}bg-blue-700{% elif user.role == 'PARENT' %}bg-green-700{% elif user.role == 'TEACHER' %}bg-purple-700{% else %}bg-indigo-700{% endif %} block px-3 py-2 rounded-md text-base font-medium flex items-center"><span class="material-icons mr-2 text-sm">logout</span> Se déconnecter</a>
                        </div>
                    </div>
                {% else %}
                    <a href="{% url 'accounts:login' %}" class="text-white hover:bg-indigo-700 block px-3 py-2 rounded-md text-base font-medium">Se connecter</a>
                {% endif %}
            </div>
        </nav>

        <!-- Toast Notifications Container -->
        {% if messages %}
        <div x-data="toastManager()" x-init="init()" class="fixed top-4 right-4 z-50 space-y-2 w-96 max-w-full">
            {% for message in messages %}
            <div x-show="toasts[{{ forloop.counter0 }}]" 
                 x-transition:enter="transition ease-out duration-300 transform"
                 x-transition:enter-start="translate-x-full opacity-0"
                 x-transition:enter-end="translate-x-0 opacity-100"
                 x-transition:leave="transition ease-in duration-200 transform"
                 x-transition:leave-start="translate-x-0 opacity-100"
                 x-transition:leave-end="translate-x-full opacity-0"
                 class="pointer-events-auto w-full overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 {% if message.tags == 'error' or message.tags == 'danger' %}bg-red-50{% elif message.tags == 'warning' %}bg-yellow-50{% elif message.tags == 'success' %}bg-green-50{% else %}bg-blue-50{% endif %}">
                <div class="p-4">
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            {% if message.tags == 'error' or message.tags == 'danger' %}
                                <svg class="h-6 w-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            {% elif message.tags == 'warning' %}
                                <svg class="h-6 w-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                                </svg>
                            {% elif message.tags == 'success' %}
                                <svg class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            {% else %}
                                <svg class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                                </svg>
                            {% endif %}
                        </div>
                        <div class="ml-3 w-0 flex-1 pt-0.5">
                            <p class="text-sm font-medium {% if message.tags == 'error' or message.tags == 'danger' %}text-red-900{% elif message.tags == 'warning' %}text-yellow-900{% elif message.tags == 'success' %}text-green-900{% else %}text-blue-900{% endif %}">
                                {{ message }}
                            </p>
                        </div>
                        <div class="ml-4 flex flex-shrink-0">
                            <button @click="closeToast({{ forloop.counter0 }})" class="inline-flex rounded-md {% if message.tags == 'error' or message.tags == 'danger' %}text-red-400 hover:text-red-500 focus:ring-red-500{% elif message.tags == 'warning' %}text-yellow-400 hover:text-yellow-500 focus:ring-yellow-500{% elif message.tags == 'success' %}text-green-400 hover:text-green-500 focus:ring-green-500{% else %}text-blue-400 hover:text-blue-500 focus:ring-blue-500{% endif %} focus:outline-none focus:ring-2 focus:ring-offset-2">
                                <span class="sr-only">Fermer</span>
                                <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <script>
            function toastManager() {
                return {
                    toasts: {},
                    init() {
                        // Initialize all toasts as visible
                        {% for message in messages %}
                        this.toasts[{{ forloop.counter0 }}] = true;
                        // Auto-close after 5 seconds (5000ms)
                        setTimeout(() => this.closeToast({{ forloop.counter0 }}), 5000);
                        {% endfor %}
                    },
                    closeToast(index) {
                        this.toasts[index] = false;
                    }
                }
            }
        </script>
        {% endif %}

        <!-- Main content -->
        <main class="mt-4">
            <div class="mx-auto max-w-7xl py-6 sm:px-6 lg:px-8">

                <!-- Content -->
                {% block content %}
                    {% if user.is_authenticated %}
                        <div class="bg-white overflow-hidden shadow rounded-lg">
                            <div class="px-4 py-5 sm:p-6">
                                <h3 class="text-lg leading-6 font-medium text-gray-900">Tableau de bord</h3>
                                <div class="mt-2 max-w-xl text-sm text-gray-500">
                                    <p>Bienvenue sur votre tableau de bord eSchool. Vous êtes connecté en tant que <strong>{{ user.get_role_display_verbose }}</strong>.</p>
                                </div>
                                <div class="mt-5">
                                    <a href="/admin/" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                        Accéder à l'administration
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="bg-white overflow-hidden shadow rounded-lg">
                            <div class="px-4 py-5 sm:p-6">
                                <h3 class="text-lg leading-6 font-medium text-gray-900">Système de gestion scolaire</h3>
                                <div class="mt-2 max-w-xl text-sm text-gray-500">
                                    <p>eSchool est un système complet de gestion scolaire pour gérer tous les aspects de votre établissement.</p>
                                </div>
                                <div class="mt-5">
                                    <a href="{% url 'accounts:login' %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                        Se connecter
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endblock %}
            </div>
        </main>

        <!-- Footer adaptatif selon le type d'utilisateur -->
        <footer class="{% if user.role == 'STUDENT' %}bg-blue-800{% elif user.role == 'PARENT' %}bg-green-800{% elif user.role == 'TEACHER' %}bg-purple-800{% else %}bg-indigo-800{% endif %} text-white">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <!-- Section Liens rapides adaptée au rôle -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            {% if user.role == 'STUDENT' %}<span class="material-icons mr-2">school</span> Espace Élève
                            {% elif user.role == 'PARENT' %}<span class="material-icons mr-2">family_restroom</span> Espace Parent
                            {% elif user.role == 'TEACHER' %}<span class="material-icons mr-2">person</span> Espace Enseignant
                            {% else %}<span class="material-icons mr-2">admin_panel_settings</span> Administration{% endif %}
                        </h3>
                        <ul class="space-y-2">
                            {% if user.role == 'STUDENT' %}
                                <li><a href="{% url 'accounts:student_grades_detail' %}" class="text-blue-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">assessment</span> Mes notes</a></li>
                                <li><a href="{% url 'accounts:student_attendance_detail' %}" class="text-blue-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">event_available</span> Mes présences</a></li>
                                <li><a href="{% url 'accounts:student_finance_detail' %}" class="text-blue-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">account_balance_wallet</span> Mes finances</a></li>
                                <li><a href="{% url 'accounts:student_academic_calendar' %}" class="text-blue-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">calendar_month</span> Calendrier académique</a></li>
                            {% elif user.role == 'PARENT' %}
                                <li><a href="{% url 'accounts:parent_children_overview' %}" class="text-green-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">groups</span> Vue d'ensemble</a></li>
                                <li><a href="{% url 'accounts:parent_communication_center' %}" class="text-green-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">chat</span> Centre de communication</a></li>
                                <li><a href="{% url 'finance:invoice_list' %}" class="text-green-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">credit_card</span> Gestion des paiements</a></li>
                            {% elif user.role == 'TEACHER' %}
                                <li><a href="{% url 'academic:attendance_list' %}" class="text-purple-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">check_circle</span> Gestion des présences</a></li>
                                <li><a href="{% url 'academic:grade_list' %}" class="text-purple-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">assessment</span> Saisie des notes</a></li>
                                <li><a href="{% url 'academic:classroom_list' %}" class="text-purple-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">meeting_room</span> Mes classes</a></li>
                            {% else %}
                                <li><a href="{% url 'academic:classroom_list' %}" class="text-indigo-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">meeting_room</span> Gestion des classes</a></li>
                                <li><a href="{% url 'accounts:student_list' %}" class="text-indigo-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">school</span> Gestion des élèves</a></li>
                                <li><a href="{% url 'accounts:teacher_list' %}" class="text-indigo-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">person</span> Gestion des enseignants</a></li>
                                <li><a href="{% url 'finance:invoice_list' %}" class="text-indigo-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">account_balance</span> Gestion financière</a></li>
                            {% endif %}
                        </ul>
                    </div>

                    <!-- Section Communication -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <span class="material-icons mr-2">forum</span> Communication
                        </h3>
                        <ul class="space-y-2">
                            {% if user.role != 'STUDENT' %}
                                <li><a href="{% url 'communication:announcement_list' %}" class="{% if user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">campaign</span> Annonces</a></li>
                            {% endif %}
                            <li><a href="{% url 'communication:message_list' %}" class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">mail</span> Messagerie</a></li>
                            {% if user.role == 'PARENT' %}
                                <li><span class="{% if user.role == 'PARENT' %}text-green-200{% endif %} flex items-center"><span class="material-icons mr-2 text-sm">support_agent</span> Support parent</span></li>
                                <li><span class="{% if user.role == 'PARENT' %}text-green-200{% endif %} flex items-center"><span class="material-icons mr-2 text-sm">event</span> Rendez-vous</span></li>
                            {% elif user.role == 'TEACHER' %}
                                <li><span class="text-purple-200 flex items-center"><span class="material-icons mr-2 text-sm">menu_book</span> Ressources pédagogiques</span></li>
                                <li><span class="text-purple-200 flex items-center"><span class="material-icons mr-2 text-sm">groups</span> Conseil de classe</span></li>
                            {% elif user.role == 'STUDENT' %}
                                <li><span class="text-blue-200 flex items-center"><span class="material-icons mr-2 text-sm">help</span> Aide aux devoirs</span></li>
                                <li><span class="text-blue-200 flex items-center"><span class="material-icons mr-2 text-sm">emoji_events</span> Activités extrascolaires</span></li>
                            {% else %}
                                <li><span class="text-indigo-200 flex items-center"><span class="material-icons mr-2 text-sm">analytics</span> Rapports statistiques</span></li>
                                <li><span class="text-indigo-200 flex items-center"><span class="material-icons mr-2 text-sm">settings</span> Configuration système</span></li>
                            {% endif %}
                        </ul>
                    </div>

                    <!-- Section Support -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <span class="material-icons mr-2">support_agent</span> Support
                        </h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">help</span> FAQ</a></li>
                            <li><a href="#" class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">menu_book</span> Guide d'utilisation</a></li>
                            <li><a href="#" class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">phone</span> Nous contacter</a></li>
                            {% if user.role == 'ADMIN' or user.role == 'SUPER_ADMIN' %}
                                <li><a href="/admin/" class="text-indigo-200 hover:text-white transition-colors flex items-center"><span class="material-icons mr-2 text-sm">build</span> Admin Django</a></li>
                            {% endif %}
                        </ul>
                    </div>

                    <!-- Section École -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <span class="material-icons mr-2">school</span> École
                        </h3>
                        <ul class="space-y-2">
                            <li><span class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} flex items-center"><span class="material-icons mr-2 text-sm">location_on</span> 123 Rue de l'Éducation</span></li>
                            <li><span class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} flex items-center"><span class="material-icons mr-2 text-sm">phone</span> +33 1 23 45 67 89</span></li>
                            <li><span class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} flex items-center"><span class="material-icons mr-2 text-sm">mail</span> contact@eschool.fr</span></li>
                            <li><span class="{% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %} flex items-center"><span class="material-icons mr-2 text-sm">schedule</span> Lun-Ven: 8h-18h</span></li>
                        </ul>
                    </div>
                </div>

                <!-- Séparateur -->
                <div class="border-t {% if user.role == 'STUDENT' %}border-blue-700{% elif user.role == 'PARENT' %}border-green-700{% elif user.role == 'TEACHER' %}border-purple-700{% else %}border-indigo-700{% endif %} mt-8 pt-6">
                    <div class="md:flex md:items-center md:justify-between">
                        <!-- Copyright et informations -->
                        <div class="flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-6">
                            <p class="text-sm {% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %}">
                                © 2024 eSchool. Tous droits réservés.
                            </p>
                            {% if user.is_authenticated %}
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium {% if user.role == 'STUDENT' %}bg-blue-100 text-blue-800{% elif user.role == 'PARENT' %}bg-green-100 text-green-800{% elif user.role == 'TEACHER' %}bg-purple-100 text-purple-800{% else %}bg-indigo-100 text-indigo-800{% endif %}">
                                        {% if user.role == 'STUDENT' %}🎓 {{ user.first_name }}
                                        {% elif user.role == 'PARENT' %}👨‍👩‍👧‍👦 {{ user.first_name }}
                                        {% elif user.role == 'TEACHER' %}👨‍🏫 {{ user.first_name }}
                                        {% else %}🔧 {{ user.first_name }}{% endif %}
                                    </span>
                                    <span class="text-xs {% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %}">
                                        Connecté depuis {{ user.last_login|timesince }}
                                    </span>
                                </div>
                            {% endif %}
                        </div>

                        <!-- Liens légaux -->
                        <div class="mt-4 md:mt-0">
                            <ul class="flex space-x-6 text-sm {% if user.role == 'STUDENT' %}text-blue-200{% elif user.role == 'PARENT' %}text-green-200{% elif user.role == 'TEACHER' %}text-purple-200{% else %}text-indigo-200{% endif %}">
                                <li><a href="#" class="hover:text-white transition-colors">📋 Conditions d'utilisation</a></li>
                                <li><a href="#" class="hover:text-white transition-colors">🔒 Politique de confidentialité</a></li>
                                <li><a href="#" class="hover:text-white transition-colors">🍪 Cookies</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    {% block extra_js %}{% endblock %}
</body>
</html>
